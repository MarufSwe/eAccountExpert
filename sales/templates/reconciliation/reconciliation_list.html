{% extends "base.html" %}
{% load static %}

{% block title %}Reconciliation List{% endblock %}

{% block content %}

<style>
    /* General table styling */
    .table {
        font-family: Arial, sans-serif; /* Change to your preferred font */
        font-size: 14px; /* Adjust font size */
    }

    /* Table header styling */
    .table thead th {
        background-color: #f8f9fa; /* Light gray background */
        font-weight: bold;
        font-size: 16px; /* Slightly larger font for headers */
    }

    /* Table body styling */
    .table tbody td {
        font-size: 13px; /* Adjust text size for better readability */
        padding: 8px; /* Add padding for spacing */
    }

    /* Truncate long text in description */
    .truncate-text {
        max-width: 200px; 
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
    }
</style>


<div class="sticky-header d-flex justify-content-between align-items-center">
    <h4 class="mb-0">ðŸ“Š Reconciliation List for {{ sales_data.shop.name }} (ðŸ“… {{ sales_data.date_uploaded }})</h4>
    <a href="{% url 'sales_data_list' %}" class="btn btn-light">ðŸ“‹ Back to Sales Data</a>
</div>

<div class="content mt-4">
    {% if reconciliations %}
    <table class="table table-sm table-bordered table-striped">
        <thead class="thead-light">
            <tr>
                <th>Description</th>
                <th>Amount</th>
                <th>Slicer New</th>
                <th>Category New</th>
                <th>Credit Amount</th>
                <th>Debit Amount</th>
                <th>Slicer List</th>
                <th>Cat List D</th>
                <th>Cat List C</th>
            </tr>
        </thead>
        <tbody>
            {% for reconciliation in reconciliations %}
                <tr>
                    <td class="truncate-text" title="{{ reconciliation.description }}">
                        {{ reconciliation.description|slice:":100" }}...
                    </td>                    
                    <td>{{ reconciliation.amount }}</td>
                    <td>{{ reconciliation.slicer_new }}</td>
                    <td>{{ reconciliation.category_new }}</td>
                    <td>{{ reconciliation.credit_amount }}</td>
                    <td>
                        {% if reconciliation.debit_amount > 0 %}
                            - {{ reconciliation.debit_amount }}
                        {% else %}
                            {{ reconciliation.debit_amount }}
                        {% endif %}
                    </td>

                    {% comment %} for 3 forign key values {% endcomment %}
                    <td>{{ reconciliation.slicer_list_name }}</td>  <!-- Display random slicer list -->
                    <td>{{ reconciliation.cat_list_d_name }}</td>  <!-- Display random cat list D -->
                    <td>{{ reconciliation.cat_list_c_name }}</td>  <!-- Display random cat list C -->
                </tr>
            {% endfor %}
        </tbody>
    </table>
    
    {% else %}
        <p class="alert alert-warning text-center">No reconciliations available for this Sales Data.</p>
    {% endif %}
</div>

{% endblock %}
